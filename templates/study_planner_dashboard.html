<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Study Planner Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    
    <style>
        body {
            background-color: #f5f7fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        header {
            background-color: #003366;
            color: white;
            padding: 15px 20px;
            text-align: center;
            border-bottom: 4px solid #001f4d;
        }
        header h1 {
            font-size: 1.8rem;
            margin: 0;
        }
        .info-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card i {
            font-size: 2.5rem;
            color: #003366;
        }
        .card h5 {
            margin-top: 10px;
            font-weight: 600;
        }
    </style>
</head>
<body>

<div class="d-flex align-items-center" style="background-color: #003366; color: white; padding: 15px; position: relative;">
  <!-- Go Back Icon on left -->
  <a href="{% url 'index' %}" style="color: #3399ff; font-size: 1.5rem;" title="Go Back Home">
    <i class="bi bi-arrow-left-circle"></i>
  </a>

  <!-- Centered title -->
  <h2 style="position: absolute; left: 50%; transform: translateX(-50%); margin: 0;">
    ðŸ“… Study Planner Dashboard
  </h2>
</div>

<div class="container mt-4">

  <!-- Info box with saved user data -->
  <div class="info-box text-center mb-4 p-3 bg-light rounded shadow-sm">
      <strong>Exam:</strong> {{ planner.exam_preferences }} |
      <strong>Subjects:</strong> 
      {% if planner.get_subject_list %}
        {{ planner.get_subject_list|join:", " }}
      {% else %}
        No subjects selected
      {% endif %} |
      <strong>Study Time:</strong> {{ planner.study_time }}
  </div>

  <!-- Feature cards -->
  <div class="row g-4">
    <div class="col-md-3">
      <div class="card text-center p-4" data-action="tasks" style="cursor:pointer;">
        <i class="bi bi-calendar-check" style="font-size: 2.5rem;"></i>
        <h5 class="mt-2">Upcoming Tasks</h5>
        <p class="text-muted small">See your weekly tasks and deadlines.</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card text-center p-4" data-action="progress" style="cursor:pointer;">
        <i class="bi bi-graph-up-arrow" style="font-size: 2.5rem;"></i>
        <h5 class="mt-2">Progress Tracker</h5>
        <p class="text-muted small">Track your study goals and achievements.</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card text-center p-4" data-action="subjects" style="cursor:pointer;">
        <i class="bi bi-book" style="font-size: 2.5rem;"></i>
        <h5 class="mt-2">Subject Overview</h5>
        <p class="text-muted small">Manage your subjects and schedules.</p>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card text-center p-4" data-action="countdown" style="cursor:pointer;">
        <i class="bi bi-hourglass-split" style="font-size: 2.5rem;"></i>
        <h5 class="mt-2">Exam Countdown</h5>
        <p class="text-muted small">Countdown to your next exam.</p>
      </div>
    </div>
  </div>

  <!-- Dynamic Content -->
  <div class="mt-5 p-4 bg-white rounded shadow-sm" id="studyPlannerContent">
      <p class="text-center text-muted">Click a card above to view details here.</p>
  </div>
</div>

<script>
  const dailyTips = [
    "Break your study sessions into 25-minute focused intervals.",
    "Review previous exams to understand question patterns.",
    "Take regular breaks to improve retention.",
    "Stay hydrated and maintain a balanced diet.",
    "Set clear goals before each study session."
  ];

  const motivationalQuotes = [
    "The future belongs to those who believe in the beauty of their dreams. â€“ Eleanor Roosevelt",
    "Donâ€™t watch the clock; do what it does. Keep going. â€“ Sam Levenson",
    "Success is not final, failure is not fatal: It is the courage to continue that counts. â€“ Winston Churchill",
    "The expert in anything was once a beginner.",
    "Push yourself because no one else is going to do it for you."
  ];

  const studyPlannerSections = {
    tasks: `
      <h3><i class="bi bi-calendar-check me-2"></i>Upcoming Tasks</h3>
      <ul>
        {% for task in tasks %}
          <li><strong>{{ task.subject }}:</strong> {{ task.title }} - {{ task.due_date|date:"D, M j" }}</li>
        {% empty %}
          <li>No tasks assigned yet.</li>
        {% endfor %}
      </ul>
    `,
    progress: `
      <h3><i class="bi bi-graph-up-arrow me-2"></i>Progress Tracker</h3>
      <div class="progress mb-3" style="height: 25px;">
        <div class="progress-bar bg-success" style="width: {{ planner.progress_percent|default:"0" }}%;">{{ planner.progress_percent|default:"0" }}%</div>
      </div>
    `,
    subjects: `
      <h3><i class="bi bi-book me-2"></i>Subject Overview</h3>
      <table class="table table-striped">
        {% if planner.get_subject_list %}
          {% for subject in planner.get_subject_list %}
            <tr>
              <td>{{ subject }}</td>
              <td>Active</td>
            </tr>
          {% endfor %}
        {% else %}
          <tr><td colspan="2">No subjects added yet.</td></tr>
        {% endif %}
      </table>
    `,
    countdown: `
      <h3><i class="bi bi-hourglass-split me-2"></i>Exam Countdown</h3>
      <p id="countdownTimer" style="font-size: 1.5rem; font-weight: bold;">Calculating...</p>
      <h5>Daily Study Tip</h5>
      <p id="dailyTip" class="fst-italic"></p>
      <h5>Motivational Quote</h5>
      <p id="motivation" class="text-primary"></p>
    `
  };

  function formatTimeLeft(diffMs) {
      if (diffMs <= 0) return "Exam time!";
      let totalSeconds = Math.floor(diffMs / 1000);
      const days = Math.floor(totalSeconds / (3600 * 24));
      totalSeconds %= 3600 * 24;
      const hours = Math.floor(totalSeconds / 3600);
      totalSeconds %= 3600;
      const minutes = Math.floor(totalSeconds / 60);
      const seconds = totalSeconds % 60;
      return `${days}d ${hours}h ${minutes}m ${seconds}s`;
  }

  const nextExamDate = new Date();
  nextExamDate.setDate(nextExamDate.getDate() + 10); // Example exam date

  function startCountdown() {
      const timerEl = document.getElementById('countdownTimer');
      if (!timerEl) return;
      setInterval(() => {
          const now = new Date();
          const diff = nextExamDate - now;
          timerEl.textContent = formatTimeLeft(diff);
      }, 1000);
  }

  function loadTipsAndQuotes() {
      const tipEl = document.getElementById('dailyTip');
      const motivationEl = document.getElementById('motivation');
      if (!tipEl || !motivationEl) return;
      tipEl.textContent = dailyTips[Math.floor(Math.random() * dailyTips.length)];
      motivationEl.textContent = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
  }

  document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('click', () => {
          const action = card.getAttribute('data-action');
          const contentDiv = document.getElementById('studyPlannerContent');
          contentDiv.innerHTML = studyPlannerSections[action] || `<p>No content.</p>`;

          if(action === 'countdown') {
              loadTipsAndQuotes();
              startCountdown();
          }
      });
  });
</script>


<section class="py-5 bg-light">
  <div class="container">
    <h2 class="text-center mb-4 fw-bold">How It Works â€“ Study Planner</h2>
    <p class="text-center mb-5 text-muted">Create a personalized study schedule that helps you stay consistent and achieve your academic goals faster.</p>
    <div class="row g-4 text-center">
      <div class="col-md-4">
        <div class="p-4 bg-white shadow-sm rounded h-100">
          <i class="bi bi-pencil-square display-4 text-primary mb-3"></i>
          <h5 class="fw-bold">Step 1: Set Your Goals</h5>
          <p>Pick your subject or exam, how long you want to prepare, and how many hours per day you can study.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-4 bg-white shadow-sm rounded h-100">
          <i class="bi bi-calendar-check display-4 text-success mb-3"></i>
          <h5 class="fw-bold">Step 2: Get Your Plan</h5>
          <p>Receive an instant day-by-day study plan that fits your timeline and workload perfectly.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="p-4 bg-white shadow-sm rounded h-100">
          <i class="bi bi-graph-up-arrow display-4 text-warning mb-3"></i>
          <h5 class="fw-bold">Step 3: Track & Adjust</h5>
          <p>Tick off completed lessons and make changes to keep your study routine flexible and effective.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">


<!-- WHY CHOOSE US - STUDY PLANNER -->
<section class="py-5 bg-light">
  <div class="container text-center">
    <h2 class="mb-4">Why Choose Our Study Planner</h2>
    <div class="row">
      <div class="col-md-3 mb-4">
        <i class="bi bi-clock-history display-4 text-primary"></i>
        <h5 class="mt-3">Time-Saving</h5>
        <p>Plan your studies in minutes with our easy-to-use interface.</p>
      </div>
      <div class="col-md-3 mb-4">
        <i class="bi bi-person-check display-4 text-success"></i>
        <h5 class="mt-3">Personalized</h5>
        <p>Custom study plans tailored to your subjects and goals.</p>
      </div>
      <div class="col-md-3 mb-4">
        <i class="bi bi-phone display-4 text-warning"></i>
        <h5 class="mt-3">Mobile Friendly</h5>
        <p>Access your planner from any device, anytime.</p>
      </div>
      <div class="col-md-3 mb-4">
        <i class="bi bi-bar-chart-line display-4 text-danger"></i>
        <h5 class="mt-3">Track Progress</h5>
        <p>Monitor your learning and stay on top of your schedule.</p>
      </div>
    </div>
  </div>
</section>



</body>
</html>
